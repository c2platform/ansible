---
# SELinux permissive mode, logging actions that would be blocked
# e.g. required on proxy to allow http connection to nexus
# this could also be done with command below on proxy 
# /usr/sbin/setsebool -P httpd_can_network_connect 1
- name: Put SELinux in permissive mode
  selinux:
    policy: targeted
    state: permissive

- name: NFS mounts
  mount:
    path: "{{ item['path'] }}"
    src: "{{ item['src'] }}"
    fstype: "{{ item['fstype'] }}"
    opts: "{{ item['opts'] }}"
    state: "{{ item['state'] }}"
  with_items: '{{ nfs_mounts }}'
  ignore_errors: True

- name: etc environment
  template:
   src: etc_environment.j2
   dest: /etc/environment

- name: Role packages
  package:
    name: '{{ common_role_packages[item] }}'
    state: present
  when: common_role_packages[item] is defined
  with_items: '{{ common_role_packages }}'
